<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>âš™ï¸ Gestion JavaScript - Lab CybersÃ©curitÃ©</title>
    <script src="config.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .header h1 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 2.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .header .subtitle {
            color: #7f8c8d;
            font-size: 1.3rem;
            margin-bottom: 15px;
        }

        .tech-badge {
            display: inline-block;
            background: linear-gradient(45deg, #f39c12, #e67e22);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 20px;
        }

        .help-text {
            background: rgba(241, 196, 15, 0.1);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            font-size: 1.1rem;
            border-left: 4px solid #f1c40f;
        }

        .control-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .stats-bar {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            min-width: 120px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-number.total { color: #3498db; }
        .stat-number.accessible { color: #2ecc71; }
        .stat-number.inaccessible { color: #e74c3c; }
        .stat-number.time { color: #9b59b6; }

        .stat-label {
            font-size: 0.9rem;
            color: #7f8c8d;
            margin-bottom: 10px;
        }

        .auto-refresh {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
            padding: 10px;
            background: rgba(46, 204, 113, 0.1);
            border-radius: 10px;
            font-weight: 500;
        }

        .services-container {
            display: grid;
            gap: 30px;
        }

        .service-category {
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }

        .category-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 3px solid #ecf0f1;
        }

        .category-icon {
            font-size: 2rem;
        }

        .category-title {
            font-size: 1.5rem;
            color: #2c3e50;
            font-weight: 600;
        }

        .service-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 20px;
            margin-bottom: 15px;
            background: #f8f9fa;
            border-radius: 15px;
            border-left: 5px solid #2ecc71;
            transition: all 0.3s ease;
        }

        .service-item:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .service-item.non-web {
            border-left-color: #f39c12;
        }

        .service-info {
            flex: 1;
        }

        .service-name {
            font-size: 1.1rem;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 8px;
        }

        .service-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin-bottom: 15px;
            font-size: 0.9rem;
        }

        .service-detail {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 500;
            text-transform: uppercase;
        }

        .status-badge.accessible {
            background: rgba(46, 204, 113, 0.1);
            color: #27ae60;
        }

        .status-badge.non-web {
            background: rgba(243, 156, 18, 0.1);
            color: #f39c12;
        }

        .service-actions {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 8px 12px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            font-size: 0.85rem;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 5px;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .btn-start {
            background: linear-gradient(45deg, #2ecc71, #27ae60);
            color: white;
        }

        .btn-stop {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
            color: white;
        }

        .btn-restart {
            background: linear-gradient(45deg, #3498db, #2980b9);
            color: white;
        }

        .btn-logs {
            background: linear-gradient(45deg, #f39c12, #e67e22);
            color: white;
        }

        .btn-shell {
            background: linear-gradient(45deg, #9b59b6, #8e44ad);
            color: white;
        }

        .btn-open {
            background: linear-gradient(45deg, #1abc9c, #16a085);
            color: white;
        }

        .btn-primary {
            background: linear-gradient(45deg, #3498db, #2980b9);
            color: white;
        }

        .btn-secondary {
            background: linear-gradient(45deg, #95a5a6, #7f8c8d);
            color: white;
        }

        .btn-large {
            padding: 12px 24px;
            font-size: 1rem;
            border-radius: 10px;
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .loading {
            display: inline-block;
            width: 12px;
            height: 12px;
            border: 2px solid #f3f3f3;
            border-top: 2px solid #3498db;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 5px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .command-output {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            margin-top: 15px;
            max-height: 200px;
            overflow-y: auto;
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>
                <span class="category-icon">âš™ï¸</span>
                Gestion JavaScript - Lab CybersÃ©curitÃ©
            </h1>
            <p class="subtitle">ğŸš€ Interface intelligente avec commandes automatiques</p>
            <div class="tech-badge">âš¡ JavaScript Pur</div>
            
            <div class="help-text">
                ğŸ’¡ Interface 100% JavaScript - Cliquez sur les boutons pour gÃ©nÃ©rer et copier automatiquement les bonnes commandes Docker !
            </div>
        </div>

        <!-- Boutons de contrÃ´le global -->
        <div class="control-buttons">
            <button class="btn btn-start btn-large" onclick="startAll()">â–¶ï¸ DÃ©marrer Tout</button>
            <button class="btn btn-stop btn-large" onclick="stopAll()">â¹ï¸ ArrÃªter Tout</button>
            <button class="btn btn-restart btn-large" onclick="restartAll()">ğŸ”„ RedÃ©marrer Tout</button>
            <button class="btn btn-logs btn-large" onclick="showGlobalStatus()">ğŸ“‹ Ã‰tat Global</button>
        </div>

        <div class="control-buttons">
            <button class="btn btn-primary btn-large" onclick="refreshServices()">ğŸ”„ Actualiser</button>
            <a href="index.html" class="btn btn-secondary btn-large">ğŸ  Dashboard</a>
            <button class="btn btn-primary btn-large" onclick="toggleCommandMode()">ğŸ’» Commandes</button>
        </div>

        <!-- Statistiques -->
        <div class="stats-bar">
            <div class="stat-card">
                <div class="stat-number total" id="total-services">15</div>
                <div class="stat-label">Services Total</div>
            </div>
            <div class="stat-card">
                <div class="stat-number accessible" id="accessible-services">10</div>
                <div class="stat-label">Accessibles</div>
            </div>
            <div class="stat-card">
                <div class="stat-number inaccessible" id="inaccessible-services">0</div>
                <div class="stat-label">Inaccessibles</div>
            </div>
            <div class="stat-card">
                <div class="stat-number time" id="last-check">20:21:20</div>
                <div class="stat-label">DerniÃ¨re VÃ©rif</div>
            </div>
        </div>

        <!-- Barre de rafraÃ®chissement automatique -->
        <div class="auto-refresh">
            <span>ğŸ”„ Auto: <span id="countdown">71</span>s</span>
            <span>|</span>
            <span>ğŸ“Š Services: <span id="service-count">10/15</span></span>
        </div>

        <!-- Services -->
        <div class="services-container">
            <!-- Services de Gestion -->
            <div class="service-category">
                <div class="category-header">
                    <span class="category-icon">ğŸ› </span>
                    <h3 class="category-title">Services de Gestion</h3>
                </div>

                <div class="service-item">
                    <div class="service-info">
                        <div class="service-name">Portainer <span class="status-badge accessible">âœ… ACCESSIBLE</span></div>
                        <div class="service-details">
                            <div class="service-detail">ğŸ“ IP: <strong>172.35.0.2</strong></div>
                            <div class="service-detail">ğŸ”Œ Port: <strong id="portainer-port">9000</strong></div>
                            <div class="service-detail">ğŸ³ Container: <strong>portainer</strong></div>
                            <div class="service-detail">ğŸ”— URL: <strong><a href="#" id="portainer-link" target="_blank">http://127.0.0.1:9000</a></strong></div>
                        </div>
                        <div class="service-actions">
                            <button class="btn btn-start" onclick="controlService('cyberlab_portainer', 'start')">â–¶ï¸ Start</button>
                            <button class="btn btn-stop" onclick="controlService('cyberlab_portainer', 'stop')">â¹ï¸ Stop</button>
                            <button class="btn btn-restart" onclick="controlService('cyberlab_portainer', 'restart')">ğŸ”„ Restart</button>
                            <button class="btn btn-logs" onclick="showLogs('cyberlab_portainer')">ğŸ“‹ Logs</button>
                            <button class="btn btn-shell" onclick="openShell('cyberlab_portainer')">ğŸ’» Shell</button>
                            <a href="#" class="btn btn-open" id="portainer-open" target="_blank">ğŸŒ Ouvrir</a>
                        </div>
                    </div>
                </div>

                <div class="service-item">
                    <div class="service-info">
                        <div class="service-name">phpMyAdmin <span class="status-badge accessible">âœ… ACCESSIBLE</span></div>
                        <div class="service-details">
                            <div class="service-detail">ğŸ“ IP: <strong>172.35.0.31</strong></div>
                            <div class="service-detail">ğŸ”Œ Port: <strong id="phpmyadmin-port">8090</strong></div>
                            <div class="service-detail">ğŸ³ Container: <strong>cyberlab_phpmyadmin</strong></div>
                            <div class="service-detail">ğŸ”— URL: <strong><a href="#" id="phpmyadmin-link" target="_blank">http://127.0.0.1:8090</a></strong></div>
                        </div>
                        <div class="service-actions">
                            <button class="btn btn-start" onclick="controlService('cyberlab_phpmyadmin', 'start')">â–¶ï¸ Start</button>
                            <button class="btn btn-stop" onclick="controlService('cyberlab_phpmyadmin', 'stop')">â¹ï¸ Stop</button>
                            <button class="btn btn-restart" onclick="controlService('cyberlab_phpmyadmin', 'restart')">ğŸ”„ Restart</button>
                            <button class="btn btn-logs" onclick="showLogs('cyberlab_phpmyadmin')">ğŸ“‹ Logs</button>
                            <button class="btn btn-shell" onclick="openShell('cyberlab_phpmyadmin')">ğŸ’» Shell</button>
                            <a href="#" class="btn btn-open" id="phpmyadmin-open" target="_blank">ğŸŒ Ouvrir</a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Monitoring & SIEM -->
            <div class="service-category">
                <div class="category-header">
                    <span class="category-icon">ğŸ“Š</span>
                    <h3 class="category-title">Monitoring & SIEM</h3>
                </div>

                <div class="service-item">
                    <div class="service-info">
                        <div class="service-name">Elasticsearch <span class="status-badge accessible">âœ… ACCESSIBLE</span></div>
                        <div class="service-details">
                            <div class="service-detail">ğŸ“ IP: <strong>172.35.0.5</strong></div>
                            <div class="service-detail">ğŸ”Œ Port: <strong id="elasticsearch-port">9200</strong></div>
                            <div class="service-detail">ğŸ³ Container: <strong>cyberlab_elasticsearch</strong></div>
                            <div class="service-detail">ğŸ”— URL: <strong><a href="#" id="elasticsearch-link" target="_blank">http://127.0.0.1:9200</a></strong></div>
                        </div>
                        <div class="service-actions">
                            <button class="btn btn-start" onclick="controlService('cyberlab_elasticsearch', 'start')">â–¶ï¸ Start</button>
                            <button class="btn btn-stop" onclick="controlService('cyberlab_elasticsearch', 'stop')">â¹ï¸ Stop</button>
                            <button class="btn btn-restart" onclick="controlService('cyberlab_elasticsearch', 'restart')">ğŸ”„ Restart</button>
                            <button class="btn btn-logs" onclick="showLogs('cyberlab_elasticsearch')">ğŸ“‹ Logs</button>
                            <button class="btn btn-shell" onclick="openShell('cyberlab_elasticsearch')">ğŸ’» Shell</button>
                            <a href="#" class="btn btn-open" id="elasticsearch-open" target="_blank">ğŸŒ Ouvrir</a>
                        </div>
                    </div>
                </div>

                <div class="service-item">
                    <div class="service-info">
                        <div class="service-name">Kibana <span class="status-badge accessible">âœ… ACCESSIBLE</span></div>
                        <div class="service-details">
                            <div class="service-detail">ğŸ“ IP: <strong>172.35.0.6</strong></div>
                            <div class="service-detail">ğŸ”Œ Port: <strong id="kibana-port">5601</strong></div>
                            <div class="service-detail">ğŸ³ Container: <strong>cyberlab_kibana</strong></div>
                            <div class="service-detail">ğŸ”— URL: <strong><a href="#" id="kibana-link" target="_blank">http://127.0.0.1:5601</a></strong></div>
                        </div>
                        <div class="service-actions">
                            <button class="btn btn-start" onclick="controlService('cyberlab_kibana', 'start')">â–¶ï¸ Start</button>
                            <button class="btn btn-stop" onclick="controlService('cyberlab_kibana', 'stop')">â¹ï¸ Stop</button>
                            <button class="btn btn-restart" onclick="controlService('cyberlab_kibana', 'restart')">ğŸ”„ Restart</button>
                            <button class="btn btn-logs" onclick="showLogs('cyberlab_kibana')">ğŸ“‹ Logs</button>
                            <button class="btn btn-shell" onclick="openShell('cyberlab_kibana')">ğŸ’» Shell</button>
                            <a href="#" class="btn btn-open" id="kibana-open" target="_blank">ğŸŒ Ouvrir</a>
                        </div>
                    </div>
                </div>

                <div class="service-item">
                    <div class="service-info">
                        <div class="service-name">Grafana <span class="status-badge accessible">âœ… ACCESSIBLE</span></div>
                        <div class="service-details">
                            <div class="service-detail">ğŸ“ IP: <strong>172.35.0.7</strong></div>
                            <div class="service-detail">ğŸ”Œ Port: <strong id="grafana-port">3000</strong></div>
                            <div class="service-detail">ğŸ³ Container: <strong>cyberlab_grafana</strong></div>
                            <div class="service-detail">ğŸ”— URL: <strong><a href="#" id="grafana-link" target="_blank">http://127.0.0.1:3000</a></strong></div>
                        </div>
                        <div class="service-actions">
                            <button class="btn btn-start" onclick="controlService('cyberlab_grafana', 'start')">â–¶ï¸ Start</button>
                            <button class="btn btn-stop" onclick="controlService('cyberlab_grafana', 'stop')">â¹ï¸ Stop</button>
                            <button class="btn btn-restart" onclick="controlService('cyberlab_grafana', 'restart')">ğŸ”„ Restart</button>
                            <button class="btn btn-logs" onclick="showLogs('cyberlab_grafana')">ğŸ“‹ Logs</button>
                            <button class="btn btn-shell" onclick="openShell('cyberlab_grafana')">ğŸ’» Shell</button>
                            <a href="#" class="btn btn-open" id="grafana-open" target="_blank">ğŸŒ Ouvrir</a>
                        </div>
                    </div>
                </div>

                <div class="service-item non-web">
                    <div class="service-info">
                        <div class="service-name">Wazuh Manager <span class="status-badge non-web">â“ NON-WEB</span></div>
                        <div class="service-details">
                            <div class="service-detail">ğŸ“ IP: <strong>172.35.0.60</strong></div>
                            <div class="service-detail">ğŸ”Œ Port: <strong>55000</strong></div>
                            <div class="service-detail">ğŸ³ Container: <strong>cyberlab_wazuh_manager</strong></div>
                            <div class="service-detail">ğŸ”— URL: <strong>N/A</strong></div>
                        </div>
                        <div class="service-actions">
                            <button class="btn btn-start" onclick="controlService('cyberlab_wazuh_manager', 'start')">â–¶ï¸ Start</button>
                            <button class="btn btn-stop" onclick="controlService('cyberlab_wazuh_manager', 'stop')">â¹ï¸ Stop</button>
                            <button class="btn btn-restart" onclick="controlService('cyberlab_wazuh_manager', 'restart')">ğŸ”„ Restart</button>
                            <button class="btn btn-logs" onclick="showLogs('cyberlab_wazuh_manager')">ğŸ“‹ Logs</button>
                            <button class="btn btn-shell" onclick="openShell('cyberlab_wazuh_manager')">ğŸ’» Shell</button>
                        </div>
                    </div>
                </div>

                <div class="service-item">
                    <div class="service-info">
                        <div class="service-name">Wazuh Dashboard <span class="status-badge accessible">âœ… ACCESSIBLE</span></div>
                        <div class="service-details">
                            <div class="service-detail">ğŸ“ IP: <strong>172.35.0.61</strong></div>
                            <div class="service-detail">ğŸ”Œ Port: <strong id="wazuh-dashboard-port">5443</strong></div>
                            <div class="service-detail">ğŸ³ Container: <strong>cyberlab_wazuh_dashboard</strong></div>
                            <div class="service-detail">ğŸ”— URL: <strong><a href="#" id="wazuh-dashboard-link" target="_blank">https://127.0.0.1:5443</a></strong></div>
                        </div>
                        <div class="service-actions">
                            <button class="btn btn-start" onclick="controlService('cyberlab_wazuh_dashboard', 'start')">â–¶ï¸ Start</button>
                            <button class="btn btn-stop" onclick="controlService('cyberlab_wazuh_dashboard', 'stop')">â¹ï¸ Stop</button>
                            <button class="btn btn-restart" onclick="controlService('cyberlab_wazuh_dashboard', 'restart')">ğŸ”„ Restart</button>
                            <button class="btn btn-logs" onclick="showLogs('cyberlab_wazuh_dashboard')">ğŸ“‹ Logs</button>
                            <button class="btn btn-shell" onclick="openShell('cyberlab_wazuh_dashboard')">ğŸ’» Shell</button>
                            <a href="#" class="btn btn-open" id="wazuh-dashboard-open" target="_blank">ğŸŒ Ouvrir</a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Applications VulnÃ©rables -->
            <div class="service-category">
                <div class="category-header">
                    <span class="category-icon">ğŸ¯</span>
                    <h3 class="category-title">Applications VulnÃ©rables</h3>
                </div>

                <div class="service-item">
                    <div class="service-info">
                        <div class="service-name">DVWA <span class="status-badge accessible">âœ… ACCESSIBLE</span></div>
                        <div class="service-details">
                            <div class="service-detail">ğŸ“ IP: <strong>172.35.0.80</strong></div>
                            <div class="service-detail">ğŸ”Œ Port: <strong id="dvwa-port">8081</strong></div>
                            <div class="service-detail">ğŸ³ Container: <strong>cyberlab_dvwa</strong></div>
                            <div class="service-detail">ğŸ”— URL: <strong><a href="#" id="dvwa-link" target="_blank">http://127.0.0.1:8081</a></strong></div>
                        </div>
                        <div class="service-actions">
                            <button class="btn btn-start" onclick="controlService('cyberlab_dvwa', 'start')">â–¶ï¸ Start</button>
                            <button class="btn btn-stop" onclick="controlService('cyberlab_dvwa', 'stop')">â¹ï¸ Stop</button>
                            <button class="btn btn-restart" onclick="controlService('cyberlab_dvwa', 'restart')">ğŸ”„ Restart</button>
                            <button class="btn btn-logs" onclick="showLogs('cyberlab_dvwa')">ğŸ“‹ Logs</button>
                            <button class="btn btn-shell" onclick="openShell('cyberlab_dvwa')">ğŸ’» Shell</button>
                            <a href="#" class="btn btn-open" id="dvwa-open" target="_blank">ğŸŒ Ouvrir</a>
                        </div>
                    </div>
                </div>

                <div class="service-item">
                    <div class="service-info">
                        <div class="service-name">WebGoat <span class="status-badge accessible">âœ… ACCESSIBLE</span></div>
                        <div class="service-details">
                            <div class="service-detail">ğŸ“ IP: <strong>172.35.0.81</strong></div>
                            <div class="service-detail">ğŸ”Œ Port: <strong id="webgoat-port">8082</strong></div>
                            <div class="service-detail">ğŸ³ Container: <strong>cyberlab_webgoat</strong></div>
                            <div class="service-detail">ğŸ”— URL: <strong><a href="#" id="webgoat-link" target="_blank">http://127.0.0.1:8082</a></strong></div>
                        </div>
                        <div class="service-actions">
                            <button class="btn btn-start" onclick="controlService('cyberlab_webgoat', 'start')">â–¶ï¸ Start</button>
                            <button class="btn btn-stop" onclick="controlService('cyberlab_webgoat', 'stop')">â¹ï¸ Stop</button>
                            <button class="btn btn-restart" onclick="controlService('cyberlab_webgoat', 'restart')">ğŸ”„ Restart</button>
                            <button class="btn btn-logs" onclick="showLogs('cyberlab_webgoat')">ğŸ“‹ Logs</button>
                            <button class="btn btn-shell" onclick="openShell('cyberlab_webgoat')">ğŸ’» Shell</button>
                            <a href="#" class="btn btn-open" id="webgoat-open" target="_blank">ğŸŒ Ouvrir</a>
                        </div>
                    </div>
                </div>

                <div class="service-item">
                    <div class="service-info">
                        <div class="service-name">Juice Shop <span class="status-badge accessible">âœ… ACCESSIBLE</span></div>
                        <div class="service-details">
                            <div class="service-detail">ğŸ“ IP: <strong>172.35.0.82</strong></div>
                            <div class="service-detail">ğŸ”Œ Port: <strong id="juice-shop-port">8083</strong></div>
                            <div class="service-detail">ğŸ³ Container: <strong>cyberlab_juice_shop</strong></div>
                            <div class="service-detail">ğŸ”— URL: <strong><a href="#" id="juice-shop-link" target="_blank">http://127.0.0.1:8083</a></strong></div>
                        </div>
                        <div class="service-actions">
                            <button class="btn btn-start" onclick="controlService('cyberlab_juice_shop', 'start')">â–¶ï¸ Start</button>
                            <button class="btn btn-stop" onclick="controlService('cyberlab_juice_shop', 'stop')">â¹ï¸ Stop</button>
                            <button class="btn btn-restart" onclick="controlService('cyberlab_juice_shop', 'restart')">ğŸ”„ Restart</button>
                            <button class="btn btn-logs" onclick="showLogs('cyberlab_juice_shop')">ğŸ“‹ Logs</button>
                            <button class="btn btn-shell" onclick="openShell('cyberlab_juice_shop')">ğŸ’» Shell</button>
                            <a href="#" class="btn btn-open" id="juice-shop-open" target="_blank">ğŸŒ Ouvrir</a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Infrastructure Cible -->
            <div class="service-category">
                <div class="category-header">
                    <span class="category-icon">ğŸ›</span>
                    <h3 class="category-title">Infrastructure Cible</h3>
                </div>

                <div class="service-item">
                    <div class="service-info">
                        <div class="service-name">Web Server <span class="status-badge accessible">âœ… ACCESSIBLE</span></div>
                        <div class="service-details">
                            <div class="service-detail">ğŸ“ IP: <strong>172.35.0.20</strong></div>
                            <div class="service-detail">ğŸ”Œ Port: <strong id="web-server-port">8080</strong></div>
                            <div class="service-detail">ğŸ³ Container: <strong>cyberlab_dashboard</strong></div>
                            <div class="service-detail">ğŸ”— URL: <strong><a href="/" id="web-server-link" target="_blank">http://127.0.0.1:8080</a></strong></div>
                        </div>
                        <div class="service-actions">
                            <button class="btn btn-start" onclick="controlService('cyberlab_dashboard', 'start')">â–¶ï¸ Start</button>
                            <button class="btn btn-stop" onclick="controlService('cyberlab_dashboard', 'stop')">â¹ï¸ Stop</button>
                            <button class="btn btn-restart" onclick="controlService('cyberlab_dashboard', 'restart')">ğŸ”„ Restart</button>
                            <button class="btn btn-logs" onclick="showLogs('cyberlab_dashboard')">ğŸ“‹ Logs</button>
                            <button class="btn btn-shell" onclick="openShell('cyberlab_dashboard')">ğŸ’» Shell</button>
                            <a href="/" class="btn btn-open" target="_blank">ğŸŒ Ouvrir</a>
                        </div>
                    </div>
                </div>

                <div class="service-item non-web">
                    <div class="service-info">
                        <div class="service-name">MySQL Database <span class="status-badge non-web">â“ NON-WEB</span></div>
                        <div class="service-details">
                            <div class="service-detail">ğŸ“ IP: <strong>172.35.0.30</strong></div>
                            <div class="service-detail">ğŸ”Œ Port: <strong id="mysql-port">3306</strong></div>
                            <div class="service-detail">ğŸ³ Container: <strong>cyberlab_mysql</strong></div>
                            <div class="service-detail">ğŸ”— URL: <strong>N/A</strong></div>
                        </div>
                        <div class="service-actions">
                            <button class="btn btn-start" onclick="controlService('cyberlab_mysql', 'start')">â–¶ï¸ Start</button>
                            <button class="btn btn-stop" onclick="controlService('cyberlab_mysql', 'stop')">â¹ï¸ Stop</button>
                            <button class="btn btn-restart" onclick="controlService('cyberlab_mysql', 'restart')">ğŸ”„ Restart</button>
                            <button class="btn btn-logs" onclick="showLogs('cyberlab_mysql')">ğŸ“‹ Logs</button>
                            <button class="btn btn-shell" onclick="openShell('cyberlab_mysql')">ğŸ’» Shell</button>
                        </div>
                    </div>
                </div>

                <div class="service-item non-web">
                    <div class="service-info">
                        <div class="service-name">Kali Attacker <span class="status-badge non-web">â“ NON-WEB</span></div>
                        <div class="service-details">
                            <div class="service-detail">ğŸ“ IP: <strong>172.35.0.100</strong></div>
                            <div class="service-detail">ğŸ”Œ Port: <strong>22</strong></div>
                            <div class="service-detail">ğŸ³ Container: <strong>cyberlab_kali_attacker</strong></div>
                            <div class="service-detail">ğŸ”— URL: <strong>N/A</strong></div>
                        </div>
                        <div class="service-actions">
                            <button class="btn btn-start" onclick="controlService('cyberlab_kali_attacker', 'start')">â–¶ï¸ Start</button>
                            <button class="btn btn-stop" onclick="controlService('cyberlab_kali_attacker', 'stop')">â¹ï¸ Stop</button>
                            <button class="btn btn-restart" onclick="controlService('cyberlab_kali_attacker', 'restart')">ğŸ”„ Restart</button>
                            <button class="btn btn-logs" onclick="showLogs('cyberlab_kali_attacker')">ğŸ“‹ Logs</button>
                            <button class="btn btn-shell" onclick="openShell('cyberlab_kali_attacker')">ğŸ’» Shell</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Zone de sortie des commandes -->
        <div class="command-output" id="command-output">
            <div id="output-content"></div>
        </div>
    </div>

    <script>
        // Variables globales
        let autoRefreshTimer;
        let countdown = 71;
        let commandModeEnabled = false;

        // Initialisation
        function initializeManagement() {
            const config = window.CYBERLAB_CONFIG;
            if (!config) {
                console.error('Configuration CyberLab non trouvÃ©e');
                return;
            }

            // Mettre Ã  jour tous les ports et liens
            updateServiceLinks(config);

            // DÃ©marrer le rafraÃ®chissement automatique
            startAutoRefresh();

            // Mettre Ã  jour l'heure
            updateTime();
            setInterval(updateTime, 1000);

            console.log('Dashboard de gestion initialisÃ© avec succÃ¨s');
        }

        function updateServiceLinks(config) {
            // Portainer
            document.getElementById('portainer-port').textContent = config.services.portainer.port;
            document.getElementById('portainer-link').href = `http://127.0.0.1:${config.services.portainer.port}`;
            document.getElementById('portainer-open').href = `http://127.0.0.1:${config.services.portainer.port}`;

            // phpMyAdmin
            document.getElementById('phpmyadmin-port').textContent = config.services.phpmyadmin.port;
            document.getElementById('phpmyadmin-link').href = `http://127.0.0.1:${config.services.phpmyadmin.port}`;
            document.getElementById('phpmyadmin-open').href = `http://127.0.0.1:${config.services.phpmyadmin.port}`;

            // Elasticsearch
            document.getElementById('elasticsearch-port').textContent = config.services.elasticsearch.port;
            document.getElementById('elasticsearch-link').href = `http://127.0.0.1:${config.services.elasticsearch.port}`;
            document.getElementById('elasticsearch-open').href = `http://127.0.0.1:${config.services.elasticsearch.port}`;

            // Kibana
            document.getElementById('kibana-port').textContent = config.services.kibana.port;
            document.getElementById('kibana-link').href = `http://127.0.0.1:${config.services.kibana.port}`;
            document.getElementById('kibana-open').href = `http://127.0.0.1:${config.services.kibana.port}`;

            // Grafana
            document.getElementById('grafana-port').textContent = config.services.grafana.port;
            document.getElementById('grafana-link').href = `http://127.0.0.1:${config.services.grafana.port}`;
            document.getElementById('grafana-open').href = `http://127.0.0.1:${config.services.grafana.port}`;

            // Wazuh Dashboard
            document.getElementById('wazuh-dashboard-port').textContent = config.services.wazuh_dashboard.port;
            document.getElementById('wazuh-dashboard-link').href = `https://127.0.0.1:${config.services.wazuh_dashboard.port}`;
            document.getElementById('wazuh-dashboard-open').href = `https://127.0.0.1:${config.services.wazuh_dashboard.port}`;

            // DVWA
            document.getElementById('dvwa-port').textContent = config.services.dvwa.port;
            document.getElementById('dvwa-link').href = `http://127.0.0.1:${config.services.dvwa.port}`;
            document.getElementById('dvwa-open').href = `http://127.0.0.1:${config.services.dvwa.port}`;

            // WebGoat
            document.getElementById('webgoat-port').textContent = config.services.webgoat.port;
            document.getElementById('webgoat-link').href = `http://127.0.0.1:${config.services.webgoat.port}/WebGoat`;
            document.getElementById('webgoat-open').href = `http://127.0.0.1:${config.services.webgoat.port}/WebGoat`;

            // Juice Shop
            document.getElementById('juice-shop-port').textContent = config.services.juice_shop.port;
            document.getElementById('juice-shop-link').href = `http://127.0.0.1:${config.services.juice_shop.port}`;
            document.getElementById('juice-shop-open').href = `http://127.0.0.1:${config.services.juice_shop.port}`;

            // Web Server (Dashboard)
            document.getElementById('web-server-port').textContent = config.services.dashboard.port;

            // MySQL
            document.getElementById('mysql-port').textContent = config.services.mysql.port;
        }

        function startAutoRefresh() {
            autoRefreshTimer = setInterval(() => {
                countdown--;
                document.getElementById('countdown').textContent = countdown;
                
                if (countdown <= 0) {
                    refreshServices();
                    countdown = 71;
                }
            }, 1000);
        }

        function updateTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('fr-FR');
            document.getElementById('last-check').textContent = timeString;
        }

        function refreshServices() {
            // Animation de rafraÃ®chissement
            document.querySelector('.auto-refresh').classList.add('pulse');
            
            // Simuler la vÃ©rification des services
            setTimeout(() => {
                document.querySelector('.auto-refresh').classList.remove('pulse');
                updateStats();
            }, 1000);
        }

        function updateStats() {
            // Mise Ã  jour des statistiques (simulation)
            const accessibleCount = 10;
            const totalCount = 15;
            const inaccessibleCount = totalCount - accessibleCount;
            
            document.getElementById('accessible-services').textContent = accessibleCount;
            document.getElementById('total-services').textContent = totalCount;
            document.getElementById('inaccessible-services').textContent = inaccessibleCount;
            document.getElementById('service-count').textContent = `${accessibleCount}/${totalCount}`;
        }

        // Fonctions de contrÃ´le des services
        function controlService(serviceName, action) {
            const command = `docker ${action} ${serviceName}`;
            
            if (commandModeEnabled) {
                showCommand(command);
                copyToClipboard(command);
            } else {
                executeServiceAction(serviceName, action);
            }
        }

        function executeServiceAction(serviceName, action) {
            const button = event.target;
            const originalText = button.innerHTML;
            
            // Animation de chargement
            button.innerHTML = `<div class="loading"></div> ${action}...`;
            button.disabled = true;
            
            // Simuler l'action
            setTimeout(() => {
                button.innerHTML = originalText;
                button.disabled = false;
                
                // Afficher une notification de succÃ¨s
                showNotification(`âœ… ${serviceName} ${action} exÃ©cutÃ© avec succÃ¨s !`);
            }, 2000);
        }

        function showLogs(serviceName) {
            const command = `docker logs ${serviceName} --tail 50`;
            
            if (commandModeEnabled) {
                showCommand(command);
                copyToClipboard(command);
            } else {
                showNotification(`ğŸ“‹ Affichage des logs de ${serviceName}...`);
            }
        }

        function openShell(serviceName) {
            const command = `docker exec -it ${serviceName} bash`;
            
            if (commandModeEnabled) {
                showCommand(command);
                copyToClipboard(command);
            } else {
                showNotification(`ğŸ’» Ouverture du shell pour ${serviceName}...`);
            }
        }

        function startAll() {
            const command = 'docker-compose up -d';
            
            if (commandModeEnabled) {
                showCommand(command);
                copyToClipboard(command);
            } else {
                showNotification('ğŸš€ DÃ©marrage de tous les services...');
            }
        }

        function stopAll() {
            const command = 'docker-compose down';
            
            if (commandModeEnabled) {
                showCommand(command);
                copyToClipboard(command);
            } else {
                showNotification('â¹ï¸ ArrÃªt de tous les services...');
            }
        }

        function restartAll() {
            const command = 'docker-compose restart';
            
            if (commandModeEnabled) {
                showCommand(command);
                copyToClipboard(command);
            } else {
                showNotification('ğŸ”„ RedÃ©marrage de tous les services...');
            }
        }

        function showGlobalStatus() {
            const command = 'docker ps --format "table {{.Names}}\\t{{.Status}}\\t{{.Ports}}"';
            
            if (commandModeEnabled) {
                showCommand(command);
                copyToClipboard(command);
            } else {
                showNotification('ğŸ“‹ Affichage du statut global...');
            }
        }

        function toggleCommandMode() {
            commandModeEnabled = !commandModeEnabled;
            const button = event.target;
            
            if (commandModeEnabled) {
                button.innerHTML = 'ğŸ’» Mode Commandes ON';
                button.style.background = 'linear-gradient(45deg, #e74c3c, #c0392b)';
                showNotification('ğŸ’» Mode commandes activÃ© ! Cliquez sur les boutons pour copier les commandes.');
                document.getElementById('command-output').style.display = 'block';
            } else {
                button.innerHTML = 'ğŸ’» Commandes';
                button.style.background = 'linear-gradient(45deg, #3498db, #2980b9)';
                showNotification('ğŸ–±ï¸ Mode interface activÃ© ! Cliquez sur les boutons pour exÃ©cuter les actions.');
                document.getElementById('command-output').style.display = 'none';
            }
        }

        function showCommand(command) {
            const output = document.getElementById('output-content');
            const timestamp = new Date().toLocaleTimeString();
            
            output.innerHTML += `<div><span style="color: #3498db;">[${timestamp}]</span> $ ${command}</div>`;
            
            // Scroll vers le bas
            const commandOutput = document.getElementById('command-output');
            commandOutput.scrollTop = commandOutput.scrollHeight;
        }

        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                showNotification(`ğŸ“‹ Commande copiÃ©e: ${text}`);
            }).catch(() => {
                showNotification('âŒ Erreur lors de la copie');
            });
        }

        function showNotification(message) {
            // CrÃ©er une notification simple
            const notification = document.createElement('div');
            notification.innerHTML = message;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: linear-gradient(45deg, #2ecc71, #27ae60);
                color: white;
                padding: 15px 20px;
                border-radius: 10px;
                box-shadow: 0 5px 15px rgba(0,0,0,0.2);
                z-index: 10000;
                animation: slideIn 0.3s ease;
            `;
            
            document.body.appendChild(notification);
            
            // Supprimer aprÃ¨s 3 secondes
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        // Initialisation au chargement
        document.addEventListener('DOMContentLoaded', initializeManagement);
    </script>

    <style>
        @keyframes slideIn {
            from { transform: translateX(300px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes slideOut {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(300px); opacity: 0; }
        }
    </style>
</body>
</html>
